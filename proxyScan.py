import sys
import signal
import requests


def end(sig, frame):
    print("\n Ending session...")
    sys.exit(1)
signal.signal(signal.SIGINT, end)

url = "http://10.10.10.10"
proxy = {'http' : 'http://10.10.10.10:3128'}
tcp_ports = {20, 21, 22, 23, 24, 25, 37, 42, 43, 49, 53, 69, 70, 79, 80, 81, 82, 88, 101, 102, 104, 105, 106, 
            107, 109, 110, 111, 113, 115, 117, 119, 123, 135, 137, 139, 143, 144, 146, 161, 162, 163, 179, 199,
            211, 212, 222, 254, 255, 256, 259, 264, 280, 301, 306, 311, 340, 366, 389, 406, 416, 417, 425, 427,
            443, 444, 445, 458, 464, 465, 481, 497, 500, 512, 513, 514, 515, 524, 541, 543, 544, 545, 548, 554,
            555, 563, 587, 593, 616, 617, 625, 631, 636, 646, 648, 666, 667, 668, 683, 687, 691, 700, 705, 711,
            714, 720, 722, 726, 749, 765, 777, 783, 787, 800, 801, 808, 843, 873, 880, 888, 902, 903, 911, 912,
            981, 987, 990, 992, 993, 995, 999, 1000, 1433, 1434, 1723, 3306, 3389, 4444, 5060, 5222, 5223, 5900,
            5984, 6379, 8080, 8443, 8888, 9200, 9300, 11211, 27017}


def tcp_scan():      
    for port in tcp_ports:
        r= requests.get(url + ':' +str(port), proxy)

        if r.status_code == 200:
            print("\n (!) Port " + str(port) + " - OPEN")


if __name__ == '__main__':
    tcp_scan()
